<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to Query Metadata from the Fragile Families API • ffmetadata</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to Query Metadata from the Fragile Families API">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ffmetadata</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/APIUsage.html">How to Query Metadata from the Fragile Families API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>How to Query Metadata from the Fragile Families API</h1>
                        <h4 class="author">Ryan Vinh and Ian E. Fellows</h4>
            
            <h4 class="date">2018-06-21</h4>
      
      
      <div class="hidden name"><code>APIUsage.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The ffmetadata package provides easy to use access to metadata surrounding the Fragile Families Project data (<a href="https://fragilefamilies.princeton.edu/" class="uri">https://fragilefamilies.princeton.edu/</a>). The data itself is complex, and so this tool makes it easy to find and filter information about the variables included. It does this by querying the Fragile Families web API. Three functions are available for use:</p>
<ul>
<li>
<code><a href="../reference/select_metadata.html">select_metadata()</a></code>: allows the user the find out specific information about a single variable</li>
<li>
<code><a href="../reference/filter_metadata.html">filter_metadata()</a></code>: allows the user to search for variables that match certain queries</li>
<li>
<code><a href="../reference/search_metadata.html">search_metadata()</a></code>: another function that allows the user to search for variables</li>
</ul>
</div>
<div id="valid-field-names-that-can-be-used-in-these-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#valid-field-names-that-can-be-used-in-these-functions" class="anchor"></a>Valid field names that can be used in these functions</h2>
<p>The <code><a href="../reference/select_metadata.html">select_metadata()</a></code>, <code><a href="../reference/filter_metadata.html">filter_metadata()</a></code>, and <code><a href="../reference/search_metadata.html">search_metadata()</a></code> functions all involve searching or using the field names of the metadata variables in some way. Below are the field names that can be used when invoking these functions:</p>
<ul>
<li>
<strong>data_source</strong> options: collected from the questionnaire, constructed from the questionnaire, a survey weight, or the unique ID assigned to each family</li>
<li>
<strong>data_type</strong> options: ordered continuous, unordered categorical, ordered categorical, binary, or string</li>
<li><strong>group_id</strong></li>
<li><strong>group_subid</strong></li>
<li>
<strong>id</strong> family ID</li>
<li>
<strong>label</strong> variable description</li>
<li>
<strong>leaf</strong> survey section and question number or constructed variable name</li>
<li>
<strong>name</strong> variable name used after 2018</li>
<li>
<strong>old_name</strong> old variable name, used before 2018</li>
<li>
<strong>respondent</strong> who answered the question (e.g., “m” = “mother”)</li>
<li>
<strong>responses</strong> possible responses to the question</li>
<li>
<strong>scope</strong> number of cities in which the question was asked</li>
<li>
<strong>section</strong> section of the survey</li>
<li>
<strong>topic</strong> narrow topic area</li>
<li>
<strong>umbrella</strong> broad topic area</li>
<li>
<strong>warning</strong> reports if there is something unusual about the answer choices for this variable</li>
<li>
<strong>wave</strong> wave of the survey</li>
</ul>
</div>
<div id="using-select_metadata-to-find-out-information-out-about-a-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#using-select_metadata-to-find-out-information-out-about-a-variable" class="anchor"></a>Using <code><a href="../reference/select_metadata.html">select_metadata()</a></code> to find out information out about a variable</h2>
<p>Suppose we want to find out the value of a given variable’s field. For example, let’s say we want to find out the source of the variable with the name “ce3datey”. To accomplish this, we would call select_metadata using “ce3datey” for variable_name and “data_source” for field_name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">select_type &lt;-<span class="st"> </span><span class="kw"><a href="../reference/select_metadata.html">select_metadata</a></span>(<span class="dt">variable_name =</span> <span class="st">"ce3datey"</span>, <span class="dt">field_name =</span> <span class="st">"data_source"</span>)
<span class="kw">print</span>(select_type)</code></pre></div>
<pre><code>## [1] "constructed"</code></pre>
<p>If we want to view the entire variable and all the values for its fields, we can call select_metadata without using the field_name parameter and simply using “ce3datey” for variable_name. This will return ce3datey as a named list with each of its fields corresponding to an element of the list.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">select_full &lt;-<span class="st"> </span><span class="kw"><a href="../reference/select_metadata.html">select_metadata</a></span>(<span class="dt">variable_name =</span> <span class="st">"ce3datey"</span>)</code></pre></div>
</div>
<div id="two-different-ways-of-searching-for-variables-search_metadata-and-filter_metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#two-different-ways-of-searching-for-variables-search_metadata-and-filter_metadata" class="anchor"></a>Two different ways of searching for variables: <code><a href="../reference/search_metadata.html">search_metadata()</a></code> and <code><a href="../reference/filter_metadata.html">filter_metadata()</a></code>
</h2>
<div id="filter_metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#filter_metadata" class="anchor"></a><code><a href="../reference/filter_metadata.html">filter_metadata()</a></code>
</h3>
<p>Suppose we want to search for all the variables that satisfy several criteria. <code><a href="../reference/filter_metadata.html">filter_metadata()</a></code> will return a list of the names of the variables that satisfy the specified criteria. For example, let’s say we want to retrieve all the binary variables from questionnaires administered in all 20 cities involved in the study. To accomplish this, we could call filter_metadata using “bin” as our type, “questionnaire” as our source, and 20 for our scope. This can be accomplished using a named list, by typing the parameters in explicitly, or by a combination of both approaches.</p>
<p><strong>It is important to note that filter_metadata uses substring matching. This means that if we use 2 for scope, it will return variables for which the scope is either 2 or 20.</strong></p>
<p>Below is the approach using explicit parameters, perhaps the most intuitive way of using <code><a href="../reference/filter_metadata.html">filter_metadata()</a></code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># explicit parameter approach</span>
filtered &lt;-<span class="st"> </span><span class="kw"><a href="../reference/filter_metadata.html">filter_metadata</a></span>(<span class="dt">data_type =</span> <span class="st">"bin"</span>, <span class="dt">data_source =</span> <span class="st">"questionnaire"</span>, <span class="dt">scope =</span> <span class="dv">20</span>)</code></pre></div>
<p>Below are two alternative options: one involves using a named list, the other involves using a combination of a named list and explicit parameters:</p>
<p>The named-list approach:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># named-list approach</span>
params_list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">data_type=</span><span class="st">"bin"</span>, <span class="dt">data_source=</span><span class="st">"questionnaire"</span>, <span class="dt">scope=</span><span class="dv">20</span>)</code></pre></div>
<p>The mixed approach:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># mixed approach</span>
params_list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">data_type =</span> <span class="st">"bin"</span>, <span class="dt">data_source =</span> <span class="st">"questionnaire"</span>)
filtered &lt;-<span class="st"> </span><span class="kw"><a href="../reference/filter_metadata.html">filter_metadata</a></span>(params_list, <span class="dt">scope =</span> <span class="dv">20</span>)</code></pre></div>
</div>
<div id="search_metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#search_metadata" class="anchor"></a><code><a href="../reference/search_metadata.html">search_metadata()</a></code>
</h3>
<p><code><a href="../reference/search_metadata.html">search_metadata()</a></code> is a reduced form of <code><a href="../reference/filter_metadata.html">filter_metadata()</a></code> that involves searching on one field rather than multiple fields. For the most part, anything that can be accomplished with <code><a href="../reference/search_metadata.html">search_metadata()</a></code> can be done with <code><a href="../reference/filter_metadata.html">filter_metadata()</a></code>. Suppose we want to search for all the variables that contain a certain substring within a given field. For example, let’s say we want to retrieve all the variables that have the substring “mother” contained in their “label” field. To accomplish this, we could call <code><a href="../reference/search_metadata.html">search_metadata()</a></code> using “mother” as our query and “label” as our field_name. The result will be a list of all the variable names that have the substring “mother” in their “label” field.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">search_label &lt;-<span class="st"> </span><span class="kw"><a href="../reference/search_metadata.html">search_metadata</a></span>(<span class="dt">query =</span> <span class="st">"mother"</span>, <span class="dt">field_name =</span> <span class="st">"label"</span>)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#valid-field-names-that-can-be-used-in-these-functions">Valid field names that can be used in these functions</a></li>
      <li><a href="#using-select_metadata-to-find-out-information-out-about-a-variable">Using <code><a href="--/reference/select_metadata-html">select_metadata()</a></code> to find out information out about a variable</a></li>
      <li><a href="#two-different-ways-of-searching-for-variables-search_metadata-and-filter_metadata">Two different ways of searching for variables: <code><a href="--/reference/search_metadata-html">search_metadata()</a></code> and <code><a href="--/reference/filter_metadata-html">filter_metadata()</a></code></a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ryan Vinh, Ian Fellows.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
